# infr-dz

Получите токен через авторизацию на сайте https://hw.shri.yandex/api/index.html. Сохраните этот токен в файл ./server/server-conf.json, в поле apiToken.

Запустить билд-сервер(в первую очередь, а то агент не приаттачится):
```
cd server && npm ci && npm start
```

Запустить билд-агента (после запуска сервера):
```
cd agent && npm ci && npm start
```

Если вы запустите второго агента, то он запустится с тем же дефолтным конфигом, и не сможет стартануть. Для запуска второго агента надо копировать папку agent и увеличивать в agent-conf.json значение "port": 8081.

Не сделано:
- Длительность сборки не считается. В БД отправляется параметр duration, который всегда равен. Не успела сделать.
- Код возврата из запускаемой командой программы не возвращается и не влияет на SUCCESS/FAIL сборки.

Node.js v12.13.0

Тестовый репозиторий с несколькими коммитами https://github.com/appalse/test-CI-repo
